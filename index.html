<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Abdul Hadi Fast Food</title>
<style>
  :root{
    --bg:#f7f3ef;
    --card:#fff;
    --maroon:#7a1020;
    --accent:#c0392b;
    --muted:#6b6b6b;
    --whatsapp:#25D366;
  }
  *{box-sizing:border-box;font-family:Poppins,system-ui,Arial;margin:0;padding:0}
  body{background:var(--bg);color:#222;line-height:1.35}
  header{
    display:flex;align-items:center;gap:12px;
    background:#fff;padding:18px 16px;border-bottom:6px solid var(--maroon);
    position:sticky;top:0;z-index:1000;
  }
  header img.logo{width:64px;height:64px;object-fit:contain;border-radius:8px}
  header h1{font-size:20px;color:var(--maroon);font-weight:800;margin:0}
  header .tag{color:var(--muted);font-size:12px;margin-left:6px}
  .hero{padding:18px;display:flex;flex-direction:column;gap:10px;align-items:center}
  /* Deals banner */
  .deals-wrap{width:100%;max-width:1100px;margin:0 auto;padding:6px 12px}
  .deals-title{display:flex;align-items:center;gap:10px;margin-bottom:8px}
  .deals-title h2{color:var(--maroon);font-size:20px;margin:0;font-weight:800}
  .deals-grid{display:flex;gap:10px;overflow-x:auto;padding:6px 0}
  .deal{
    min-width:200px;background:linear-gradient(180deg,#fff,#ffecec);
    border-radius:12px;padding:12px;border:1px solid rgba(0,0,0,0.05);box-shadow:0 6px 18px rgba(0,0,0,0.06)
  }
  .deal h4{margin:0 0 8px 0;font-size:16px;color:var(--accent)}
  .deal p{margin:0;font-weight:700;color:var(--maroon)}
  /* categories nav */
  .categories{display:flex;gap:8px;overflow-x:auto;padding:10px 12px;background:#fff;border-top:1px solid #eee;border-bottom:1px solid #eee}
  .cat{padding:10px 14px;border-radius:8px;white-space:nowrap;font-weight:700;background:transparent;border:1px solid transparent;color:var(--maroon);cursor:pointer}
  .cat:hover{background:rgba(122,16,32,0.06)}
  /* sections */
  main{max-width:1100px;margin:18px auto;padding:0 14px}
  .section-banner{display:flex;align-items:center;gap:10px;margin-bottom:12px}
  .section-banner h2{color:var(--maroon);font-size:18px;margin:0;font-weight:800}
  .section-banner .mini{background:var(--maroon);color:#fff;padding:6px 10px;border-radius:8px;font-size:12px;margin-left:8px}
  .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
  .card{
    background:var(--card);padding:10px;border-radius:12px;box-shadow:0 10px 20px rgba(0,0,0,0.06);
    display:flex;flex-direction:column;gap:8px;align-items:center;text-align:center;
  }
  .card img{width:100%;height:140px;object-fit:cover;border-radius:10px}
  .card .name{font-weight:800;color:#222}
  .price{color:var(--accent);font-weight:800}
  .buy-btn{background:var(--maroon);color:#fff;border:none;padding:10px 14px;border-radius:8px;font-weight:800;cursor:pointer;width:100%}
  .small{font-size:13px;color:var(--muted)}
  /* cart bar */
  .cart-bar{position:fixed;left:50%;transform:translateX(-50%);bottom:18px;background:linear-gradient(90deg,var(--maroon),#b8272a);color:#fff;padding:12px 18px;border-radius:999px;z-index:2000;box-shadow:0 10px 30px rgba(0,0,0,0.2);font-weight:800;display:flex;gap:12px;align-items:center}
  /* modal */
  .modal-back{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;padding:16px;z-index:3000}
  .modal{background:#fff;width:100%;max-width:920px;border-radius:12px;display:flex;gap:18px;overflow:hidden}
  .modal-left{flex:1;padding:18px}
  .modal-left img{width:100%;height:320px;object-fit:cover;border-radius:8px}
  .modal-right{width:420px;padding:18px;display:flex;flex-direction:column;gap:12px}
  .modal-right h3{margin:0;color:var(--maroon)}
  .option-group{border-top:1px solid #eee;padding-top:12px;display:flex;flex-direction:column;gap:8px}
  .option-row{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px dashed #f0f0f0}
  .option-row label{font-weight:700}
  .qty-row{display:flex;gap:8px;align-items:center}
  .qbtn{width:36px;height:36px;border-radius:8px;border:none;background:#eee;font-weight:800;cursor:pointer}
  .add-final{margin-top:auto;background:var(--maroon);color:#fff;padding:12px;border-radius:10px;border:none;font-weight:900}
  /* mobile tweaks */
  @media(max-width:640px){
    .grid{grid-template-columns:repeat(1,1fr)}
    header h1{font-size:18px}
    .modal{flex-direction:column}
    .modal-right{width:100%}
    .modal-left img{height:220px}
  }
  footer{padding:18px;text-align:center;color:var(--muted);font-size:14px;margin-top:24px}
</style>
</head>
<body>

<!-- header -->
<header>
  <img src="images/logo.png" alt="logo" class="logo" id="logoImg">
  <div>
    <h1>Abdul Hadi Fast Food</h1>
    <div class="tag">Fresh • Fast • Tasty</div>
  </div>
</header>

<!-- deals -->
<div class="deals-wrap">
  <div class="deals-title">
    <h2>Deals</h2>
    <div class="mini">Hot Offers</div>
  </div>
  <div class="deals-grid" id="dealsGrid">
    <!-- deals injected by JS -->
  </div>
</div>

<!-- categories nav (teleport) -->
<div class="categories" id="categoriesNav" aria-hidden="false">
  <!-- categories injected by JS -->
</div>

<main>
  <!-- sections injected by JS -->
  <div id="sectionsContainer"></div>
</main>

<!-- cart bar -->
<div class="cart-bar" id="cartBar">
  <div id="cartSummary">Cart: 0 items - Rs. 0</div>
  <button class="buy-btn" style="background:var(--whatsapp);color:#fff;border:none;padding:8px 12px;border-radius:8px;font-weight:800" onclick="openCheckout()">Checkout</button>
</div>

<!-- options modal -->
<div class="modal-back" id="modalBack">
  <div class="modal" role="dialog" aria-modal="true">
    <div class="modal-left">
      <img src="images/placeholder.jpg" id="modalImg" alt="">
    </div>
    <div class="modal-right">
      <h3 id="modalTitle">Item Name</h3>
      <div class="small" id="modalPrice">Rs. 0</div>

      <div class="option-group" id="optsContainer">
        <!-- option groups injected here -->
      </div>

      <div class="option-group">
        <div class="option-row">
          <div><strong>Quantity</strong></div>
          <div class="qty-row">
            <button class="qbtn" onclick="changeModalQty(-1)">-</button>
            <div id="modalQty">1</div>
            <button class="qbtn" onclick="changeModalQty(1)">+</button>
          </div>
        </div>
      </div>

      <button class="add-final" id="modalAddBtn">Add to Cart / WhatsApp</button>
    </div>
  </div>
</div>

<footer>© Abdul Hadi Fast Food - Demo</footer>

<script>
/* -------------------------
   DATA: menu + deals
   You can change prices here.
   Each item has id, name, price, img, section and optional options array.
   Options: {type:'radio'|'checkbox'|'select', name:'Size', choices:[{label,price, id}]}
   ------------------------- */
const deals = [
  {id:'deal1',title:'Deal 1',desc:'Buy 4 Zinger get 1 free',price:1000,items:['zinger_burger']},
  {id:'deal2',title:'Deal 2',desc:'2 Zinger + Next Cola (245ml)',price:550,items:['zinger_burger']},
  {id:'deal3',title:'Deal 3',desc:'Zinger + Club + Next Cola (1L)',price:600,items:['zinger_burger','club_sandwich']},
  {id:'deal4',title:'Deal 4',desc:'2 Zinger + Free Fries',price:500,items:['zinger_burger']},
  {id:'deal5',title:'Deal 5',desc:'Zinger + Club + 2 Ice cream',price:750,items:['zinger_burger','club_sandwich','ice_cream']},
  {id:'deal6',title:'Deal 6',desc:'3 Zinger + Next Cola (1L)',price:850,items:['zinger_burger']},
  {id:'deal7',title:'Deal 7',desc:'Qtr Broast (leg) + Club + Zinger',price:800,items:['qtr_broast_leg','club_sandwich','zinger_burger']},
  {id:'deal8',title:'Deal 8',desc:'2 Zinger + Club + Chicken Roll',price:850,items:['zinger_burger','club_sandwich','chicken_roll']},
  {id:'family',title:'Family Deal',desc:'2 Zinger,2 Chicken Burger,1 Club,2 Zinger Roll,1 Next Cola (1L)',price:2200,items:[]}
];

const menuSections = [
  {id:'burgers',title:'Burgers'},
  {id:'sandwiches',title:'Sandwiches'},
  {id:'broast',title:'Broast'},
  {id:'naan',title:'Naan'},
  {id:'fries',title:'Fries'},
  {id:'pizza_fries',title:'Pizza Fries'},
  {id:'boti',title:'Boti'},
  {id:'bbq',title:'Barbeque'},
  {id:'icecream',title:'Ice Cream'},
  {id:'soup',title:'Soup'},
  {id:'shakes',title:'Shakes'},
  {id:'kabab',title:'Kabab'},
  {id:'rolls',title:'Rolls'},
  {id:'beverages',title:'Beverages'},
  {id:'extras',title:'Extras'}
];

/* items: use ids (lowercase, no spaces). Update image filenames accordingly */
const items = [
  /* Burgers */
  {id:'zinger_burger',section:'burgers',name:'Zinger Burger',price:250,img:'images/zinger_burger.jpg',options:[
    {type:'radio',name:'Fries',key:'fries',choices:[{id:'no_fries',label:'Without Fries',price:0},{id:'with_fries',label:'With Fries',price:80}]},
    {type:'checkbox',name:'Cheese',key:'cheese',choices:[{id:'cheese',label:'Add Cheese',price:50}]}
  ]},
  {id:'zinger_cheese',section:'burgers',name:'Zinger Cheese Burger',price:300,img:'images/zinger_cheese.jpg'},
  {id:'mini_burger',section:'burgers',name:'Mini Burger',price:200,img:'images/mini_burger.jpg',options:[
    {type:'checkbox',name:'Cheese',key:'cheese',choices:[{id:'cheese',label:'Add Cheese',price:50}]}
  ]},
  {id:'mini_burger_cheese',section:'burgers',name:'Mini Burger Cheese',price:250,img:'images/mini_burger_cheese.jpg'},
  {id:'jumbo_zinger',section:'burgers',name:'Jumbo Zinger',price:450,img:'images/jumbo_zinger.jpg',options:[
    {type:'checkbox',name:'Cheese',key:'cheese',choices:[{id:'cheese',label:'Add Cheese',price:50}]}
  ]},
  {id:'jumbo_zinger_cheese',section:'burgers',name:'Jumbo Zinger Cheese',price:500,img:'images/jumbo_zinger_cheese.jpg'},
  {id:'chicken_burger',section:'burgers',name:'Chicken Burger',price:250,img:'images/chicken_burger.jpg',options:[
    {type:'checkbox',name:'Cheese',key:'cheese',choices:[{id:'cheese',label:'Add Cheese',price:50}]}
  ]},
  {id:'chicken_cheese_burger',section:'burgers',name:'Chicken Cheese Burger',price:300,img:'images/chicken_cheese_burger.jpg'},
  {id:'chicken_jumbo',section:'burgers',name:'Chicken Jumbo Burger',price:450,img:'images/chicken_jumbo.jpg'},
  {id:'beef_burger',section:'burgers',name:'Beef Burger',price:300,img:'images/beef_burger.jpg',options:[
    {type:'checkbox',name:'Cheese',key:'cheese',choices:[{id:'cheese',label:'Add Cheese',price:50}]}
  ]},
  {id:'beef_cheese',section:'burgers',name:'Beef Cheese Burger',price:350,img:'images/beef_cheese.jpg'},
  {id:'beef_jumbo',section:'burgers',name:'Beef Jumbo Burger',price:450,img:'images/beef_jumbo.jpg'},
  {id:'two_in_one',section:'burgers',name:'Two in One Burger',price:500,img:'images/two_in_one.jpg'},

  /* Sandwiches */
  {id:'chicken_sandwich',section:'sandwiches',name:'Chicken Sandwich',price:200,img:'images/chicken_sandwich.jpg',options:[
    {type:'checkbox',name:'Cheese',key:'cheese',choices:[{id:'cheese',label:'Add Cheese',price:50}]}
  ]},
  {id:'chicken_cheese_sandwich',section:'sandwiches',name:'Chicken Cheese Sandwich',price:250,img:'images/chicken_cheese_sandwich.jpg'},
  {id:'club_sandwich',section:'sandwiches',name:'Club Sandwich',price:250,img:'images/club_sandwich.jpg',options:[
    {type:'checkbox',name:'Cheese',key:'cheese',choices:[{id:'cheese',label:'Add Cheese',price:50}]}
  ]},
  {id:'club_cheese',section:'sandwiches',name:'Club Cheese Sandwich',price:300,img:'images/club_cheese.jpg'},
  {id:'crispy_sandwich',section:'sandwiches',name:'Crispy Sandwich',price:300,img:'images/crispy_sandwich.jpg',options:[
    {type:'checkbox',name:'Cheese',key:'cheese',choices:[{id:'cheese',label:'Add Cheese',price:50}]}
  ]},
  {id:'crispy_cheese',section:'sandwiches',name:'Crispy Cheese Sandwich',price:350,img:'images/crispy_cheese.jpg'},
  {id:'bbq_sandwich',section:'sandwiches',name:'BBQ Sandwich',price:350,img:'images/bbq_sandwich.jpg',options:[
    {type:'checkbox',name:'Club',key:'club',choices:[{id:'club',label:'Make it Club',price:50}]},
    {type:'checkbox',name:'Cheese',key:'cheese',choices:[{id:'cheese',label:'Add Cheese',price:50}]}
  ]},
  {id:'bbq_club',section:'sandwiches',name:'BBQ Club Sandwich',price:400,img:'images/bbq_club.jpg'},
  {id:'malai_sandwich',section:'sandwiches',name:'Malai Sandwich',price:400,img:'images/malai_sandwich.jpg',options:[
    {type:'checkbox',name:'Club',key:'club',choices:[{id:'club',label:'Make it Club',price:50}]},
    {type:'checkbox',name:'Cheese',key:'cheese',choices:[{id:'cheese',label:'Add Cheese',price:50}]}
  ]},
  {id:'malai_club',section:'sandwiches',name:'Malai Club Sandwich',price:450,img:'images/malai_club.jpg'},

  /* Broast */
  {id:'qtr_broast_chest',section:'broast',name:'Qtr Broast (Chest)',price:400,img:'images/qtr_broast_chest.jpg'},
  {id:'qtr_broast_leg',section:'broast',name:'Qtr Broast (Leg)',price:350,img:'images/qtr_broast_leg.jpg'},
  {id:'crispy_broast_chest',section:'broast',name:'Crispy Broast (Chest)',price:400,img:'images/crispy_broast_chest.jpg'},
  {id:'crispy_broast_leg',section:'broast',name:'Crispy Broast (Leg)',price:400,img:'images/crispy_broast_leg.jpg'},
  {id:'spicy_broast',section:'broast',name:'Spicy Broast',price:500,img:'images/spicy_broast.jpg'},

  /* Naan */
  {id:'chapati',section:'naan',name:'Chapati',price:20,img:'images/chapati.jpg'},
  {id:'puri_paratha_small',section:'naan',name:'Puri Paratha Small',price:50,img:'images/puri_small.jpg'},
  {id:'puri_paratha',section:'naan',name:'Puri Paratha',price:80,img:'images/puri.jpg'},

  /* Fries */
  {id:'plain_fries',section:'fries',name:'Plain Fries',price:50,img:'images/plain_fries.jpg',notes:'small/large pricing handled later'},
  {id:'masala_fries',section:'fries',name:'Masala Fries',price:100,img:'images/masala_fries.jpg'},
  {id:'mayo_fries',section:'fries',name:'Mayo Fries',price:150,img:'images/mayo_fries.jpg'},
  {id:'mayo_garlic_fries',section:'fries',name:'Mayo Garlic Fries',price:200,img:'images/mayo_garlic_fries.jpg'},

  /* Pizza Fries */
  {id:'pizza_fries_med',section:'pizza_fries',name:'Pizza Fries (Medium)',price:300,img:'images/pizza_fries_med.jpg'},
  {id:'pizza_fries_large',section:'pizza_fries',name:'Pizza Fries (Large)',price:400,img:'images/pizza_fries_large.jpg'},
  {id:'matkka_fries_med',section:'pizza_fries',name:'Matkka Fries (Medium)',price:200,img:'images/matkaa_fries_med.jpg'},
  {id:'matkka_fries_large',section:'pizza_fries',name:'Matkka Fries (Large)',price:450,img:'images/matkaa_fries_large.jpg'},
  {id:'chicken_fries_med',section:'pizza_fries',name:'Chicken Fries (Medium)',price:250,img:'images/chicken_fries_med.jpg'},
  {id:'chicken_fries_large',section:'pizza_fries',name:'Chicken Fries (Large)',price:350,img:'images/chicken_fries_large.jpg'},

  /* Boti */
  {id:'chicken_boti',section:'boti',name:'Chicken Boti',price:350,img:'images/chicken_boti.jpg'},
  {id:'chicken_bihari_boti',section:'boti',name:'Chicken Bihari Boti',price:400,img:'images/chicken_bihari_boti.jpg'},
  {id:'malai_boti',section:'boti',name:'Malai Boti',price:400,img:'images/malai_boti.jpg'},
  {id:'beef_boti',section:'boti',name:'Beef Boti',price:450,img:'images/beef_boti.jpg'},
  {id:'beef_bihari_boti',section:'boti',name:'Beef Bihari Boti',price:500,img:'images/beef_bihari_boti.jpg'},

  /* Barbeque */
  {id:'chicken_tikka_chest',section:'bbq',name:'Chicken Tikka Chest',price:400,img:'images/chicken_tikka_chest.jpg'},
  {id:'chicken_tikka_leg',section:'bbq',name:'Chicken Tikka Leg',price:350,img:'images/chicken_tikka_leg.jpg'},
  {id:'malai_tikka_chest',section:'bbq',name:'Malai Tikka Chest',price:450,img:'images/malai_tikka_chest.jpg'},
  {id:'bihari_tikka_chest',section:'bbq',name:'Bihari Tikka Chest',price:450,img:'images/bihari_tikka_chest.jpg'},
  {id:'green_tikka_chest',section:'bbq',name:'Green Tikka Chest',price:450,img:'images/green_tikka_chest.jpg'},

  /* Ice cream */
  {id:'single_scope',section:'icecream',name:'Single Scoop',price:100,img:'images/single_scoop.jpg',options:[
    {type:'radio',name:'Size',key:'size',choices:[{id:'single',label:'Single Scoop',price:0},{id:'double',label:'Double Scoop',price:80}]}
  ]},
  {id:'double_scope',section:'icecream',name:'Double Scoop',price:180,img:'images/double_scoop.jpg'},
  {id:'ah_special',section:'icecream',name:'A.H Special Falooda',price:350,img:'images/ah_falooda.jpg'},

  /* Soup */
  {id:'hot_sour',section:'soup',name:'Hot & Sour Soup',price:180,img:'images/hot_sour.jpg'},
  {id:'corn_soup',section:'soup',name:'Corn Soup',price:150,img:'images/corn_soup.jpg'},
  {id:'veg_soup',section:'soup',name:'Vegetable Soup',price:130,img:'images/veg_soup.jpg'},

  /* Shakes (many) */
  {id:'kitkat_shake',section:'shakes',name:'Kitkat Shake',price:300,img:'images/kitkat_shake.jpg'},
  {id:'oreo_shake',section:'shakes',name:'Oreo Shake',price:250,img:'images/oreo_shake.jpg'},
  /* ... include the rest as named earlier (omitted here to save space) */

  /* Kabab */
  {id:'reshmy_kabab',section:'kabab',name:'Reshmy Kabab',price:400,img:'images/reshmy_kabab.jpg'},
  {id:'gola_kabab',section:'kabab',name:'Gola Kabab',price:400,img:'images/gola_kabab.jpg'},
  {id:'dhaga_kabab',section:'kabab',name:'Dhaga Kabab',price:500,img:'images/dhaga_kabab.jpg'},

  /* Rolls (many) -- include cheese/mayo options where needed */
  {id:'chicken_roll',section:'rolls',name:'Chicken Roll',price:160,img:'images/chicken_roll.jpg',options:[
    {type:'checkbox',name:'Cheese',key:'cheese',choices:[{id:'cheese',label:'Add Cheese',price:40}]},
    {type:'checkbox',name:'Mayo',key:'mayo',choices:[{id:'mayo',label:'Add Mayo',price:40}]}
  ]},
  {id:'chicken_cheese_roll',section:'rolls',name:'Chicken Cheese Roll',price:200,img:'images/chicken_cheese_roll.jpg'},
  {id:'chicken_mayo_roll',section:'rolls',name:'Chicken Mayo Roll',price:250,img:'images/chicken_mayo_roll.jpg'},
  {id:'zinger_roll',section:'rolls',name:'Zinger Roll',price:180,img:'images/zinger_roll.jpg',options:[
    {type:'checkbox',name:'Cheese',key:'cheese',choices:[{id:'cheese',label:'Add Cheese',price:50}]}
  ]},
  {id:'beef_roll',section:'rolls',name:'Beef Roll',price:200,img:'images/beef_roll.jpg',options:[
    {type:'checkbox',name:'Mayo',key:'mayo',choices:[{id:'mayo',label:'Add Mayo',price:50}]},
    {type:'checkbox',name:'Cheese',key:'cheese',choices:[{id:'cheese',label:'Add Cheese',price:50}]}
  ]},

  /* Beverages / Extras */
  {id:'cold_300',section:'beverages',name:'Cold Drink 300ml',price:70,img:'images/cold_300.jpg'},
  {id:'cold_500',section:'beverages',name:'Cold Drink 500ml',price:100,img:'images/cold_500.jpg'},
  {id:'mayo_dip',section:'extras',name:'Mayo Dip',price:80,img:'images/mayo.jpg'},
  {id:'ketchup_dip',section:'extras',name:'Ketchup Dip',price:80,img:'images/ketchup.jpg'},
  {id:'raita',section:'extras',name:'Raita',price:80,img:'images/raita.jpg'},
  {id:'cheese_slice',section:'extras',name:'Cheese Slice',price:50,img:'images/cheese.jpg'},
  {id:'coleslaw',section:'extras',name:'Coleslaw',price:80,img:'images/coleslaw.jpg'}
];

/* -------------------------
   RENDERING
   -------------------------*/
const dealsGrid = document.getElementById('dealsGrid');
const categoriesNav = document.getElementById('categoriesNav');
const sectionsContainer = document.getElementById('sectionsContainer');
const modalBack = document.getElementById('modalBack');
const modalImg = document.getElementById('modalImg');
const modalTitle = document.getElementById('modalTitle');
const modalPrice = document.getElementById('modalPrice');
const optsContainer = document.getElementById('optsContainer');
const modalQty = document.getElementById('modalQty');
const modalAddBtn = document.getElementById('modalAddBtn');

let cart = {};
let currentModal = {item:null, qty:1, selected:{}};

function formatRs(n){return 'Rs. '+Number(n).toLocaleString()}

function renderDeals(){
  dealsGrid.innerHTML='';
  deals.forEach(d=>{
    const el = document.createElement('div');
    el.className='deal';
    el.innerHTML = `<h4>${d.title}</h4><p>${d.desc}</p><div style="margin-top:8px;font-weight:900">${formatRs(d.price)}</div>
      < <div style="margin-top:8px"><button class="buy-btn" onclick="openDeal('${d.id}')">Buy</button></div>`;
    dealsGrid.appendChild(el);
  });
}

function renderCategories(){
  categoriesNav.innerHTML='';
  menuSections.forEach(s=>{
    const b = document.createElement('button');
    b.className='cat'; b.innerText = s.title;
    b.onclick = ()=>{document.getElementById('sec-'+s.id).scrollIntoView({behavior:'smooth',block:'start'})};
    categoriesNav.appendChild(b);
  });
}

function renderSections(){
  sectionsContainer.innerHTML='';
  menuSections.forEach(s=>{
    const sec = document.createElement('section');
    sec.id = 'sec-'+s.id;
    sec.innerHTML = `<div class="section-banner"><h2>${s.title}</h2><div class="mini">${s.title}</div></div><div class="grid" id="grid-${s.id}"></div>`;
    sectionsContainer.appendChild(sec);
  });
  items.forEach(it=>{
    const grid = document.getElementById('grid-'+it.section);
    if(!grid) return;
    const card = document.createElement('div'); card.className='card';
    const imgPath = it.img || 'images/placeholder.jpg';
    card.innerHTML = `<img src="${imgPath}" alt="${it.name}" onerror="this.src='images/placeholder.jpg'">
      <div class="name">${it.name}</div>
      <div class="price">${formatRs(it.price)}</div>
      <div class="small">${it.notes||''}</div>
      <button class="buy-btn" onclick="openOptions('${it.id}')">Buy</button>`;
    grid.appendChild(card);
  });
}

/* open options for item by id */
function openOptions(id){
  const it = items.find(i=>i.id===id);
  if(!it) return;
  currentModal.item = it; currentModal.qty = 1; currentModal.selected = {};
  modalImg.src = it.img || 'images/placeholder.jpg';
  modalTitle.innerText = it.name;
  modalPrice.innerText = formatRs(it.price);
  modalQty.innerText = '1';
  optsContainer.innerHTML = '';
  if(it.options && it.options.length){
    it.options.forEach(opt=>{
      const optWrap = document.createElement('div'); optWrap.className='option-group';
      optWrap.innerHTML = `<div style="font-weight:800">${opt.name}</div>`;
      opt.choices.forEach(ch=>{
        const id = `${it.id}_${ch.id}`;
        if(opt.type==='radio'){
          const checked = ch===opt.choices[0] ? 'checked' : '';
          const inner = document.createElement('div');
          inner.className='option-row';
          inner.innerHTML = `<label><input type="radio" name="${it.id}_${opt.key}" value="${ch.id}" data-price="${ch.price}" ${checked}> ${ch.label} ${ch.price?(' + Rs '+ch.price):''}</label><div class="small"></div>`;
          optWrap.appendChild(inner);
          // default selection
          if(!currentModal.selected[opt.key]) currentModal.selected[opt.key] = ch.id;
        } else if(opt.type==='checkbox'){
          const inner = document.createElement('div');
          inner.className='option-row';
          inner.innerHTML = `<label><input type="checkbox" name="${it.id}_${opt.key}" value="${ch.id}" data-price="${ch.price}"> ${ch.label} ${ch.price?(' + Rs '+ch.price):''}</label><div class="small"></div>`;
          optWrap.appendChild(inner);
        } else if(opt.type==='select'){
          // not used now
        }
      });
      optsContainer.appendChild(optWrap);
    });
  } else {
    optsContainer.innerHTML = `<div class="option-group"><div class="option-row"><div style="font-weight:800">No options for this item</div></div></div>`;
  }
  modalBack.style.display='flex';
}

/* change modal qty */
function changeModalQty(delta){
  let q = currentModal.qty + delta;
  if(q<1) q = 1;
  currentModal.qty = q;
  modalQty.innerText = q;
}

/* add to cart from modal (this will open WhatsApp with order text) */
modalAddBtn.onclick = function(){
  const it = currentModal.item;
  if(!it) return;
  // compute price
  let price = it.price;
  // read selected options
  const selectedOptions = {};
  if(it.options){
    it.options.forEach(opt=>{
      if(opt.type==='radio'){
        const radio = document.querySelector(`input[name="${it.id}_${opt.key}"]:checked`);
        if(radio){
          selectedOptions[opt.key] = radio.value;
          price += Number(radio.dataset.price||0);
        }
      } else if(opt.type==='checkbox'){
        const checks = document.querySelectorAll(`input[name="${it.id}_${opt.key}"]:checked`);
        if(checks.length){
          selectedOptions[opt.key] = Array.from(checks).map(c=>c.value);
          checks.forEach(c=> price += Number(c.dataset.price||0));
        }
      }
    });
  }
  const qty = currentModal.qty || 1;
  // add to cart object
  const cartKey = it.id + JSON.stringify(selectedOptions);
  if(!cart[cartKey]) cart[cartKey] = {item:it, qty:0, options:selectedOptions, priceUnit:price};
  cart[cartKey].qty += qty;
  updateCartDisplay();
  closeModal();
};

/* close modal when clicking outside */
modalBack.addEventListener('click', (e)=>{
  if(e.target === modalBack) closeModal();
});
function closeModal(){ modalBack.style.display='none'; currentModal = {item:null,qty:1,selected:{}}; }

/* open special deal - treat similar to item */
function openDeal(dealId){
  const d = deals.find(x=>x.id===dealId);
  if(!d) return;
  // show modal with simple add
  modalImg.src = 'images/deal_placeholder.jpg';
  modalTitle.innerText = d.title;
  modalPrice.innerText = formatRs(d.price);
  optsContainer.innerHTML = `<div class="option-group"><div class="option-row"><div style="font-weight:800">${d.desc}</div></div></div>`;
  currentModal = {item:{id:d.id,name:d.title,price:d.price},qty:1,selected:{}};
  modalQty.innerText='1';
  modalBack.style.display='flex';
}

/* cart summary & whatsapp order builder */
function updateCartDisplay(){
  let totalItems = 0, totalPrice = 0;
  for(const k in cart){
    totalItems += cart[k].qty;
    totalPrice += cart[k].qty * cart[k].priceUnit;
  }
  document.getElementById('cartSummary').innerText = `Cart: ${totalItems} items - Rs. ${totalPrice}`;
}

/* checkout (open WhatsApp with order text) */
function openCheckout(){
  if(Object.keys(cart).length===0){ alert('Cart is empty'); return; }
  let msg = "Assalamualaikum! I want to place an order:%0A";
  let grand = 0;
  for(const k in cart){
    const c = cart[k];
    const lineText = `${c.item.name} x${c.qty} = Rs ${c.qty * c.priceUnit}`;
    msg += `• ${lineText}%0A`;
    if(c.options && Object.keys(c.options).length){
      msg += `  options: ${JSON.stringify(c.options)}%0A`;
    }
    grand += c.qty * c.priceUnit;
  }
  msg += `%0ATotal: Rs ${grand}%0AName: [Your Name]%0AAddress: [Your Address]`;
  const phone = '03158377135'; // replace with store phone
  window.open(`https://wa.me/${phone}?text=${msg}`,'_blank');
}

/* initial render */
renderDeals();
renderCategories();
renderSections();
updateCartDisplay();
</script>
</body>
</html>
